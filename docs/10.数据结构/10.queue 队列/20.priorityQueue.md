---
title: PriorityQueue
date: 2022-04-26 21:51:55
permalink: /ds/queue/priorityQueue/
categories:
  - 数据结构
  - queue队列
tags:
  - 
---

## 什么是优先级队列？

优先级队列是一种抽象的数据类型，其行为类似于普通队列，只是每个元素都有一定的优先级，也就是说，在优先级队列中，具有最高优先级的元素会排在第一位。优先级队列中的元素的优先级将决定元素从优先级队列中被移除的顺序。

优先级队列只支持可比较的元素，这意味着元素是按升序或降序排列的。

例如，假设我们有一些像1、3、4、8、14、22这样的数值被插入优先级队列中，对这些数值的排序是从最小到最大。因此，1号将有最高的优先权，而22号将有最低的优先权。

## 优先级队列的特点

优先级队列是队列的扩展，包含以下特点：

- 优先级队列中的每个元素都有一些与之相关的优先级。
- 一个具有较高优先级的元素将在删除较低优先级的元素之前被删除。
- 如果一个优先级队列中的两个元素具有相同的优先级，它们将使用先进先出的原则进行排列。

让我们通过一个例子来理解优先级队列：我们有一个优先级队列，其中包含以下数值：1, 3, 4, 8, 14, 22，所有的值都按升序排列。现在，我们将观察一下执行以下操作后的优先级队列的情况。

- poll()。这个函数将从优先级队列中移除最高优先级的元素。在上面的优先级队列中，'1'元素的优先级最高，所以它将被从优先级队列中删除。
- add(2)。这个函数将在优先级队列中插入'2'元素。由于2是所有数字中最小的元素，所以它将获得最高的优先级。
- poll()。它将从优先级队列中删除'2'元素，因为它拥有最高的优先级队列。
- add(5)。它将在4后面插入5元素，因为5比4大，比8小，所以它将获得优先级队列中的第三高优先级。

## 实现

### JavaScript

```js
const { Heap } = require('@datastructures-js/heap');

class PriorityQueue {
  /**
   * Creates a priority queue
   * @params {function} compare
   */
  constructor(compare, _values) {
    if (typeof compare !== 'function') {
      throw new Error('PriorityQueue constructor expects a compare function');
    }
    this._heap = new Heap(compare, _values);
    if (_values) {
      this._heap.fix();
    }
  }

  /**
   * Returns an element with highest priority in the queue
   * @public
   * @returns {number|string|object}
   */
  front() {
    return this._heap.root();
  }

  /**
   * Returns an element with lowest priority in the queue
   * @public
   * @returns {number|string|object}
   */
  back() {
    return this._heap.leaf();
  }

  /**
   * Adds a value to the queue
   * @public
   * @param {number|string|object} value
   * @returns {PriorityQueue}
   */
  enqueue(value) {
    return this._heap.insert(value);
  }

  /**
   * Removes and returns an element with highest priority in the queue
   * @public
   * @returns {number|string|object}
   */
  dequeue() {
    return this._heap.extractRoot();
  }

  /**
   * Returns the number of elements in the queue
   * @public
   * @returns {number}
   */
  size() {
    return this._heap.size();
  }

  /**
   * Checks if the queue is empty
   * @public
   * @returns {boolean}
   */
  isEmpty() {
    return this._heap.isEmpty();
  }

  /**
   * Clears the queue
   * @public
   */
  clear() {
    this._heap.clear();
  }

  /**
   * Returns a sorted list of elements from highest to lowest priority
   * @public
   * @returns {array}
   */
  toArray() {
    return this._heap.clone().sort().reverse();
  }

  /**
   * Creates a priority queue from an existing array
   * @public
   * @static
   * @returns {PriorityQueue}
   */
  static fromArray(values, compare) {
    return new PriorityQueue(compare, values);
  }
}
```
